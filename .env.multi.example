# Sing-Box 多协议多端口配置示例
# 支持在单个容器中部署多个协议到不同端口范围

# ===========================================
# 多协议配置 (主要配置)
# ===========================================

# 多协议配置字符串
# 格式: protocol:port_range:count,protocol:port_range:count
# 协议: reality, hy2, trojan, ss
# 端口范围: 单端口(1000) 或 范围(1000-1003)
# 数量: 要配置的端口数量

# 示例1: Reality + Hysteria2 (你的经典使用场景)
MULTI_PROTOCOL_CONFIG=reality:1000-1003:4,hy2:2000-2003:4

# 示例2: 全协议部署
# MULTI_PROTOCOL_CONFIG=reality:1000-1001:2,hy2:2000-2001:2,trojan:3000-3001:2,ss:4000-4001:2

# 示例3: 高密度Reality部署
# MULTI_PROTOCOL_CONFIG=reality:10000-10019:20

# 示例4: 混合端口配置
# MULTI_PROTOCOL_CONFIG=reality:443,445,447,449:4,hy2:8443,8445,8447,8449:4

# ===========================================
# 全局配置
# ===========================================

# 日志级别 (trace, debug, info, warn, error)
LOG_LEVEL=info

# 流量嗅探
SNIFF_ENABLED=true
SNIFF_OVERRIDE_DESTINATION=true

# ===========================================
# Reality 协议配置
# ===========================================

# 伪装域名 (推荐大型网站)
REALITY_SERVER_NAME=www.cloudflare.com

# Reality 密钥对 (留空自动生成)
REALITY_PRIVATE_KEY=
REALITY_PUBLIC_KEY=

# ===========================================
# 协议特定密码 (可选)
# ===========================================

# Hysteria2 密码 (留空自动生成)
HY2_PASSWORD=

# Trojan 密码 (留空自动生成)
TROJAN_PASSWORD=

# Shadowsocks 配置
SS_METHOD=2022-blake3-aes-256-gcm
SS_PASSWORD=

# ===========================================
# Docker 配置
# ===========================================

# 容器名称
CONTAINER_NAME=singbox-multi

# 数据目录
DATA_DIR=./data

# 网络配置
NETWORK_NAME=singbox-network

# ===========================================
# 预定义场景配置
# ===========================================

# 场景1: 基础双协议 (Reality + Hysteria2)
# MULTI_PROTOCOL_CONFIG=reality:1000-1003:4,hy2:2000-2003:4

# 场景2: 企业级部署 (多协议高可用)
# MULTI_PROTOCOL_CONFIG=reality:443-462:20,hy2:8443-8462:20,trojan:9443-9462:20

# 场景3: 开发测试环境
# MULTI_PROTOCOL_CONFIG=reality:10000-10001:2,hy2:10002-10003:2,trojan:10004-10005:2,ss:10006-10007:2

# 场景4: 高密度单协议
# MULTI_PROTOCOL_CONFIG=reality:20000-20099:100

# ===========================================
# 端口映射示例
# ===========================================

# 对于 reality:1000-1003:4,hy2:2000-2003:4 配置
# Docker端口映射应为:
# -p 1000:1000 -p 1001:1001 -p 1002:1002 -p 1003:1003 (TCP)
# -p 2000:2000/udp -p 2001:2001/udp -p 2002:2002/udp -p 2003:2003/udp (UDP)

# ===========================================
# 快速启动示例
# ===========================================

# 方法1: 使用多协议部署脚本 (推荐)
# ./docker/multi-deploy.sh

# 方法2: 使用docker-compose
# docker-compose -f docker-compose.multi.yml up -d singbox-multi

# 方法3: 直接docker run
# docker run -d \
#   --name singbox-multi \
#   -p 1000-1003:1000-1003 \
#   -p 2000-2003:2000-2003/udp \
#   -e MULTI_PROTOCOL_CONFIG="reality:1000-1003:4,hy2:2000-2003:4" \
#   --entrypoint /opt/sing-box/scripts/entrypoint-multi.sh \
#   sing-box:latest